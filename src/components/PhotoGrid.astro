---
import 'glightbox/dist/css/glightbox.css';
import '../styles/glightbox-custom.css';
import { Image } from 'astro:assets';
import type { Image as ImageType } from '../data/galleryData';

interface Props {
	images: ImageType[];
}

const { images } = Astro.props;
---

<section id="photo-grid" class="gallery-masonry">
	{
		images.map((image) => (
			<a
				href={image.src.src}
				class="gallery-masonry-item glightbox"
				data-gallery="gallery1"
				data-type="image"
				data-glightbox={image.description ? `title: ${image.description}` : undefined}
			>
				<Image
					src={image.src}
					widths={[320, 480, 640, 768, 960]}
					sizes="(max-width: 640px) 96vw, (max-width: 1024px) 45vw, 28vw"
					quality={70}
					format="avif"
					alt={image.title}
					loading="lazy"
					decoding="async"
					fetchpriority="low"
				/>
				<div class="gallery-masonry-overlay">
					<span class="gallery-masonry-title">{image.description || image.title}</span>
				</div>
			</a>
		))
	}
</section>

<script>
	import GLightbox from 'glightbox';
	
	document.addEventListener('DOMContentLoaded', () => {
		GLightbox({
			selector: '.glightbox',
			touchNavigation: true,
			loop: true,
			autoplayVideos: true
		});
	});
</script>
